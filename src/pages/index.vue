<script lang="ts" setup>
// import { gsap } from 'gsap'

onMounted(() => {
  // gsap.fromTo('#card', { autoAlpha: 0, y: '-100%' }, { y: 0, autoAlpha: 1, ease: 'power1.back', duration: 1 })
})

const { nowTime, ask } = useHello()

const user = userStore()
const hi = computed(() => {
  return `${ask.value}，${user.getNickName}！`
})

const weather = ref('')
useRequest(getWeather, {
  onSuccess: ({ data }) => {
    if (!data)
      return
    weather.value = `${data?.city}天气：${data?.wea}    温度：${data?.tem}℃    风向：${data?.win}    风力：${data?.win_speed}\n\n${data?.air_tips}`
  },
})
</script>

<template>
  <CardRows height>
    <Card id="card" class="text-center whitespace-nowrap card-bg bg-no-repeat bg-left-bottom bg-auto flex-1 !h-full">
      <div

        class="flex h-full items-center justify-center flex-col text-3xl space-y-5 p-2 min-h-[500px]"
      >
        <span> <NIcon class="mi-twemoji-timer-clock" size="60" /></span>
        <span>{{ hi }}</span>
        <span class="font-mono"> {{ nowTime }}</span>
        <div v-if="weather !== ''" style="white-space:pre-wrap;color:#fff;mix-blend-mode:difference;" class="!mb-30 text-shadow-sm bg-contain text-xl">
          {{ weather }}
        </div>
      </div>
    </Card>
  </CardRows>
</template>

<style scoped>
.mi-twemoji-timer-clock {
  background: url("data:image/svg+xml;utf8,%3Csvg viewBox='0 0 36 36' width='1.2em' height='1.2em' xmlns='http://www.w3.org/2000/svg' %3E%3Cpath fill='%23AAB8C2' d='M18 0C8.611 0 1 7.611 1 17h.029v17c0 1.1.9 2 2 2H33c1.1 0 2-.9 2-2V17c0-9.389-7.611-17-17-17z'/%3E%3Ccircle cx='18' cy='17' r='14' fill='%23FFF'/%3E%3Cpath fill='%2366757F' d='M18 4c7.18 0 13 5.82 13 13s-5.82 13-13 13S5 24.18 5 17S10.82 4 18 4m0-2C9.729 2 3 8.729 3 17s6.729 15 15 15s15-6.729 15-15S26.271 2 18 2z'/%3E%3Cpath fill='%23292F33' d='M19 6a1 1 0 0 0-2 0v1a1 1 0 0 0 2 0V6zm0 21a1 1 0 0 0-2 0v1a1 1 0 0 0 2 0v-1zM8 16H7a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2zm21 0h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2zm-2.293 8.293L26 23.586A.999.999 0 1 0 24.586 25l.707.707a.999.999 0 1 0 1.414-1.414zM10 23.586l-.707.707a.999.999 0 1 0 1.414 1.414l.707-.707A.999.999 0 1 0 10 23.586zM9.293 9.707l.707.707A.999.999 0 1 0 11.414 9l-.707-.707a.999.999 0 1 0-1.414 1.414zM26 10.414l.707-.707a.999.999 0 1 0-1.414-1.414L24.586 9A.999.999 0 1 0 26 10.414z'/%3E%3Cpath fill='%23DD2E44' d='M8.915 13.839a1 1 0 0 1 1.325-1.288l8.154 3.51a1 1 0 0 1-.791 1.837l-8.154-3.51a1 1 0 0 1-.534-.549z'/%3E%3C/svg%3E")
    no-repeat;
}
.card-bg{
background-image: url("data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgMzAwIiB3aWR0aD0iNDA2IiBoZWlnaHQ9IjMwNiIgY2xhc3M9ImlsbHVzdHJhdGlvbiBzdHlsZXNfaWxsdXN0cmF0aW9uVGFibGV0X18xRFdPYSI+PGVsbGlwc2UgY3g9IjE5Mi45OCIgY3k9IjI0MS45IiByeD0iMTU4LjM2IiByeT0iMTcuOTciIGZpbGw9IiNlNmU2ZTYiIG9wYWNpdHk9IjAuMyI+PC9lbGxpcHNlPjxwYXRoIGQ9Ik04MywxMzQuMjhTNTkuNDcsMTQ1LjU1LDU2LjQsMTcxLjUycy0xMS43NCw3Ni4xMiw1Mi4wOSw3My4yNiw5My45My02LjQyLDc4Ljg4LTU1LjE5UzgzLDEzNC4yOCw4MywxMzQuMjhaIiBmaWxsPSIjZmZkMjAwIj48L3BhdGg+PHBhdGggZD0iTTgwLjU5LDE0Ny43N2ExOC41OCwxOC41OCwwLDAsMCw4LjQ5LDE5LjA4YzguNjYsNS43MSwyMiwyNiwzMi4zMywzNi4yNmExNi45LDE2LjksMCwwLDEsNSwxMi4yM2MwLDEuODUuNzUsMy45LDMuMTksNS45LDcuMTgsNS44NywzNy4zMSw4LjgsNTQuMTYtOS4yNnMtNS4zNy0yNy01LjM3LTI3bC03NC4wNi00MC4wOVoiIG9wYWNpdHk9IjAuMDkiPjwvcGF0aD48cGF0aCBkPSJNMjQ0LjMsMjM2LjE4czEuNTcsNCw1LjUxLDQuODYsNi4wOCw1Ljc0LTIuNTMsNS0xMy4zNC41Ni0xMi4xLTQuMTcuNjgtNS40NC42OC01LjQ0WiIgZmlsbD0iI2Y0YTI4YyI+PC9wYXRoPjxwYXRoIGQ9Ik0xODYuNDgsMjMyLjg1cy0uNjYsNC4yMSwyLjI3LDcsMi4zMSw4LTQuNywzLTExLjc2LTYuMzEtOC4yOS05Ljc1LDMuMzUtNC4zNCwzLjM1LTQuMzRaIiBmaWxsPSIjZjRhMjhjIj48L3BhdGg+PHBhdGggZD0iTTE5NCwxNzNzNTIuNjUuNTQsNTIuMTQsNjMuMzNsLTEyLjQyLDIuMTFzLTIuMzktNjYuMzEtNzAuODEtMzQuNzJsMy41Ny0yNi4xMloiIGZpbGw9IiMyNDI4NWIiPjwvcGF0aD48cGF0aCBkPSJNMTk0LDE3M3M1Mi42NS41NCw1Mi4xNCw2My4zM2wtMTIuNDIsMi4xMXMtMi4zOS02Ni4zMS03MC44MS0zNC43MmwzLjU3LTI2LjEyWiIgb3BhY2l0eT0iMC4wOSI+PC9wYXRoPjxwb2x5Z29uIHBvaW50cz0iMTk4LjEzIDExNS4yIDIwMi43IDExNi40MiAxOTkuNDUgMTEyLjkyIDE5OC4xMyAxMTUuMiIgZmlsbD0iI2ZmZDIwMCI+PC9wb2x5Z29uPjxwYXRoIGQ9Ik0xMjYuMzEsMTQ2LjI4czkuMSwyMywzMS4zMSwxOC45NSwzMC42NS01MC42NCwzMC42NS01MC42NCw4Ljc4LTUuNzEsNC41My0xMi4wOC0xMS4xNiw3LjQxLTExLjE2LDcuNDEtOS41NywzOS4yNi0zMC4yOCwyNi41M1oiIGZpbGw9IiNmNGEyOGMiPjwvcGF0aD48cGF0aCBkPSJNMTI2LjMxLDE0Ni4yOHM5LjEsMjMsMzEuMzEsMTguOTUsMzAuNjUtNTAuNjQsMzAuNjUtNTAuNjQsOC43OC01LjcxLDQuNTMtMTIuMDgtMTEuMTYsNy40MS0xMS4xNiw3LjQxLTkuNTcsMzkuMjYtMzAuMjgsMjYuNTNaIiBvcGFjaXR5PSIwLjA5Ij48L3BhdGg+PHBhdGggZD0iTTEyNi41OSw5OS41Nmw0LjgsMXMzNy4xLDIwLjE0LDMwLjIsNDAuMzEsOC4xNywzOS4zMiw4LjE3LDM5LjMyTDEzNy41LDIwMi45MVM5NS4zNiwxODIsMTAxLjY3LDEyNC40QzEwMS42NywxMjQuNCwxMDQuNiw5Ny41NywxMjYuNTksOTkuNTZaIiBmaWxsPSIjNjhlMWZkIj48L3BhdGg+PHJlY3QgeD0iMTkyLjk1IiB5PSIxMDYuNjMiIHdpZHRoPSI2Ljc1IiBoZWlnaHQ9IjU3LjYzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OC4wOCAtNzEuNjkpIHJvdGF0ZSgyNS42OCkiIGZpbGw9IiNlNmU2ZTYiPjwvcmVjdD48cGF0aCBkPSJNMjk4LDIzMnMtMTAuMjQtMi44LTEyLjQ3LTEyLjMzYzAsMCwxNS44Ny0zLjIxLDE2LjMyLDEzLjE3WiIgZmlsbD0iIzY4ZTFmZCIgb3BhY2l0eT0iMC41OCI+PC9wYXRoPjxwYXRoIGQ9Ik0yOTkuMjMsMjMxcy03LjE2LTExLjMxLS44Ni0yMS44OWMwLDAsMTIuMDcsNy42Niw2LjcxLDIxLjkyWiIgZmlsbD0iIzY4ZTFmZCIgb3BhY2l0eT0iMC43MyI+PC9wYXRoPjxwYXRoIGQ9Ik0zMDEuMDcsMjMxczMuNzgtMTEuOTUsMTUuMjEtMTQuMjFjMCwwLDIuMTUsNy43Ni03LjQsMTQuMjRaIiBmaWxsPSIjNjhlMWZkIj48L3BhdGg+PHBvbHlnb24gcG9pbnRzPSIyOTMuNjQgMjMwLjcxIDI5NS43MiAyNDQuOTIgMzA4LjggMjQ0Ljk3IDMxMC43MyAyMzAuNzggMjkzLjY0IDIzMC43MSIgZmlsbD0iIzI0Mjg1YiI+PC9wb2x5Z29uPjxyZWN0IHg9IjIwMy4yMSIgeT0iMzQuMjkiIHdpZHRoPSI3Mi41OCIgaGVpZ2h0PSI1MC44MiIgZmlsbD0iI2U2ZTZlNiIgb3BhY2l0eT0iMC42NiI+PC9yZWN0PjxyZWN0IHg9IjI3NS4zNiIgeT0iMTA1LjQ4IiB3aWR0aD0iNjUuNTUiIGhlaWdodD0iNDUuOSIgZmlsbD0iI2U2ZTZlNiIgb3BhY2l0eT0iMC40MyI+PC9yZWN0PjxjaXJjbGUgY3g9IjIyMi4zNiIgY3k9IjQ5LjQ0IiByPSI4LjQ3IiBmaWxsPSIjZTZlNmU2Ij48L2NpcmNsZT48cmVjdCB4PSIyNDEuMiIgeT0iNDIuMjUiIHdpZHRoPSIyMy44NSIgaGVpZ2h0PSIzMy4xMyIgZmlsbD0iI2MxYzFjMSIgb3BhY2l0eT0iMC40NSI+PC9yZWN0PjxyZWN0IHg9IjIxNS4zNSIgeT0iNjQuMjciIHdpZHRoPSIxNi4zOCIgaGVpZ2h0PSIxMS4xMSIgZmlsbD0iI2MxYzFjMSI+PC9yZWN0Pjxwb2x5Z29uIHBvaW50cz0iMTI0LjgzIDc0LjI2IDExOC4xNSA5Ny44MSAxMzEuMzkgMTAwLjU2IDEzMC45NCA4Mi4zMiAxMjQuODMgNzQuMjYiIGZpbGw9IiNmNGEyOGMiPjwvcG9seWdvbj48cGF0aCBkPSJNMTMxLjIxLDg2LjMxYTguODksOC44OSwwLDAsMS00LTMuMTFzLS4zNCw0LjQ3LDQsOS40NFoiIGZpbGw9IiNjZTgxNzIiIG9wYWNpdHk9IjAuMzEiPjwvcGF0aD48cGF0aCBkPSJNMTM4LjU0LDc1cy0uNjYsNy40NC0yLjc2LDEyLjA5YTMuNzQsMy43NCwwLDAsMS01LDEuODZjLTIuMzMtMS4wOS01LjE2LTMuMjQtNS4yOS03LjI3bC0xLjA2LTYuODFhNi43Miw2LjcyLDAsMCwxLDQuMTYtNi41NEMxMzMuMjksNjYsMTM5LjE3LDcwLjQ0LDEzOC41NCw3NVoiIGZpbGw9IiNmNGEyOGMiPjwvcGF0aD48cGF0aCBkPSJNMTI5LjYxLDc5Ljg2cy40NS0yLjg0LTEuNzItMy0yLjg0LDMuOTQsMCw0LjgzWiIgZmlsbD0iI2Y0YTI4YyI+PC9wYXRoPjxwYXRoIGQ9Ik0xMzcuODgsNzkuNjFsMS41NSwzLjJhMS4yLDEuMiwwLDAsMS0xLjA3LDEuNzJsLTIuOSwwWiIgZmlsbD0iI2Y0YTI4YyI+PC9wYXRoPjxyZWN0IHg9IjE3NC4xOCIgeT0iMTA2LjE1IiB3aWR0aD0iMjYuMzgiIGhlaWdodD0iMi42MyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzguODQgLTc5LjI5KSByb3RhdGUoMzApIiBmaWxsPSIjMjQyODViIj48L3JlY3Q+PHBhdGggZD0iTTE0NC45LDE5MC40bC03LjQsMTIuNTFzLTI2LjgzLTEzLTM0LjUyLTQ4LjE4LDE3LjY4LTIxLjQ3LDE3LjY4LTIxLjQ3WiIgb3BhY2l0eT0iMC4xOCI+PC9wYXRoPjxwYXRoIGQ9Ik0xMzcuNSwyMDIuOTFzMjQuODYtNTAuNjgsNjEuNjItNTAuNDktMTEsODEuNzgtMTEsODEuNzhMMTc2LDIyOS4yN3MxOC0zNSwxMy40Mi00Ni4yN1MxNzcuODQsMjQ5LjQ3LDEzNy41LDIwMi45MVoiIGZpbGw9IiMyNDI4NWIiPjwvcGF0aD48cGF0aCBkPSJNMTE2LjIzLDEwMi40czExLjA2LTUuNjEsMTYuNjgsNS43OSwxLjE5LDYwLjQzLDI0LDYzUzE5MS4yOSwxNTAsMTkxLjI5LDE1MHMxLjg4LTEwLDUtMTEuNjYsNS44Nyw4Ljg1LDAsMTVjMCwwLTEwLjA2LDM3Ljc5LTQyLDM4LjY0Uzg0Ljc0LDEyOC4yOCwxMTYuMjMsMTAyLjRaIiBmaWxsPSIjZjRhMjhjIj48L3BhdGg+PHBhdGggZD0iTTEzOC41OSw2NS4zczcuMjcsOC41NS0yLjE0LDEwLjM0LTExLjM1LDMuNDgtMTAuNDUsMTMsNC42MywxOC4yOS03Ljg1LDI0LjI2LTEuNzUsMTYtNC4wNSwyNy43LTEzLjI3LDE5Ljc4LTI3LjMyLDExLjhTNjQuMDYsMTI0LDc5LjEyLDExMS43N3MzNC0xNS4yLDM0LTM0LjkyUzEyOC44Niw1Ni4xMSwxMzguNTksNjUuM1oiIGZpbGw9IiMyNDI4NWIiPjwvcGF0aD48Y2lyY2xlIGN4PSIyOTYuMTkiIGN5PSIxMjguOTgiIHI9IjEwLjE0IiBmaWxsPSIjYzFjMWMxIiBvcGFjaXR5PSIwLjQzIj48L2NpcmNsZT48cmVjdCB4PSIyOTQuOTciIHk9IjExMy40NCIgd2lkdGg9IjE3LjYzIiBoZWlnaHQ9IjE3LjYzIiBmaWxsPSIjYzFjMWMxIiBvcGFjaXR5PSIwLjQzIj48L3JlY3Q+PHJlY3QgeD0iMzE4LjM2IiB5PSIxMTMuNDQiIHdpZHRoPSIxMy4xNSIgaGVpZ2h0PSIyOS4yMiIgZmlsbD0iI2MxYzFjMSIgb3BhY2l0eT0iMC40MyI+PC9yZWN0PjxyZWN0IHg9IjE4OC4wOCIgeT0iMTUwLjcxIiB3aWR0aD0iOS45NyIgaGVpZ2h0PSI1LjYzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2Ny4zNSAtNTguNykgcm90YXRlKDIwLjg3KSIgZmlsbD0iIzY4ZTFmZCI+PC9yZWN0PjxyZWN0IHg9IjE4OC4wOCIgeT0iMTUwLjcxIiB3aWR0aD0iOS45NyIgaGVpZ2h0PSI1LjYzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2Ny4zNSAtNTguNykgcm90YXRlKDIwLjg3KSIgZmlsbD0iI2ZmZiIgb3BhY2l0eT0iMC40NCI+PC9yZWN0Pjwvc3ZnPg==");
background-size: max(320px, min(600px, 35vw));
}
</style>

<route lang="json">
{
  "meta": {
    "i18n": {
      "en": "Dashboard",
      "zh": "仪表面板"
    }
  }
}
</route>
